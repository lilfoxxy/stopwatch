<!DOCTYPE html>
<html>
<head>
  <title>Focus / Break Timer</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      background: #1e1e1e;
      font-family: 'Inter', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: white;
    }

    .board {
      display: flex;
      gap: 30px;
      width: 92%;
      height: 90%;
    }

    .side {
      flex: 1;
      border-radius: 40px;
      display: flex;
      flex-direction: column;
      padding: 30px;
      transition: 0.3s ease;
    }

    .green { background: #16a34a; }
    .red { background: #dc2626; }
    .inactive { filter: brightness(0.6); }

    .title {
      font-size: 1.8rem;
      font-weight: 700;
      text-align: center;
      letter-spacing: 1px;
      opacity: 0.9;
    }

    .lap-current {
      font-size: 6vw;
      font-weight: 800;
      text-align: center;
      margin-top: 20px;
    }

    .total-time {
      font-size: 1rem;
      opacity: 0.85;
      text-align: center;
      margin-top: 10px;
    }

    .laps {
      margin-top: 25px;
      overflow-y: auto;
      flex-grow: 1;
      font-size: 0.9rem;
    }

    .lap-item {
      padding: 6px 0;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }

  </style>
</head>
<body>

<div class="board">
  
  <div id="greenSide" class="side green">
    <div class="title">Focus</div>
    <div id="greenCurrent" class="lap-current">00:00.000</div>
    <div id="greenTotal" class="total-time">Total: 00:00.000</div>
    <div id="greenLaps" class="laps"></div>
  </div>

  <div id="redSide" class="side red inactive">
    <div class="title">Break</div>
    <div id="redCurrent" class="lap-current">00:00.000</div>
    <div id="redTotal" class="total-time">Total: 00:00.000</div>
    <div id="redLaps" class="laps"></div>
  </div>

</div>

<script>
  let activeSide = "green";
  let startTime = Date.now();
  let interval;
  let running = true;

  let greenTotal = 0;
  let redTotal = 0;
  let greenLapTime = 0;
  let redLapTime = 0;
  let greenLapCount = 1;
  let redLapCount = 1;
  let currentLapElement;

  function format(ms) {
    let m = Math.floor(ms / 60000);
    let s = Math.floor((ms % 60000) / 1000);
    let msPart = ms % 1000;
    return String(m).padStart(2,"0") + ":" +
           String(s).padStart(2,"0") + "." +
           String(msPart).padStart(3,"0");
  }

  function update() {
    if (!running) return;
    let now = Date.now();
    let diff = now - startTime;

    if (activeSide === "green") {
      greenTotal += diff;
      greenLapTime += diff;
      document.getElementById("greenCurrent").textContent = format(greenLapTime);
      document.getElementById("greenTotal").textContent = "Total: " + format(greenTotal);
      currentLapElement.textContent = "Lap " + greenLapCount + " - " + format(greenLapTime);
    } else {
      redTotal += diff;
      redLapTime += diff;
      document.getElementById("redCurrent").textContent = format(redLapTime);
      document.getElementById("redTotal").textContent = "Total: " + format(redTotal);
      currentLapElement.textContent = "Lap " + redLapCount + " - " + format(redLapTime);
    }

    startTime = now;
  }

  function createNewLap() {
    let lap = document.createElement("div");
    lap.className = "lap-item";

    if (activeSide === "green") {
      lap.textContent = "Lap " + greenLapCount + " - 00:00.000";
      document.getElementById("greenLaps").prepend(lap);
    } else {
      lap.textContent = "Lap " + redLapCount + " - 00:00.000";
      document.getElementById("redLaps").prepend(lap);
    }

    currentLapElement = lap;
  }

  function switchSide() {
    if (!running) return;
    update();

    if (activeSide === "green") {
      greenLapTime = 0;
      greenLapCount++;
      setActive("red");
    } else {
      redLapTime = 0;
      redLapCount++;
      setActive("green");
    }

    createNewLap();
    startTime = Date.now();
  }

  function resetTimer() {
    running = true;
    greenTotal = redTotal = 0;
    greenLapTime = redLapTime = 0;
    greenLapCount = redLapCount = 1;

    document.getElementById("greenCurrent").textContent = "00:00.000";
    document.getElementById("redCurrent").textContent = "00:00.000";
    document.getElementById("greenTotal").textContent = "Total: 00:00.000";
    document.getElementById("redTotal").textContent = "Total: 00:00.000";
    document.getElementById("greenLaps").innerHTML = "";
    document.getElementById("redLaps").innerHTML = "";

    setActive("green");
    createNewLap();
    startTime = Date.now();
  }

  function pauseTimer() {
    running = !running;
    startTime = Date.now(); // prevent jump when resuming
  }

  function setActive(side) {
    activeSide = side;
    document.getElementById("greenSide").classList.toggle("inactive", side !== "green");
    document.getElementById("redSide").classList.toggle("inactive", side !== "red");
  }

  document.addEventListener("keydown", function(e){
    if (e.code === "Space") {
      e.preventDefault();
      switchSide();
    }
    if (e.code === "KeyR") {
      e.preventDefault();
      resetTimer();
    }
    if (e.code === "KeyP") {
      e.preventDefault();
      pauseTimer();
    }
  });

  createNewLap();
  interval = setInterval(update, 10);
</script>

</body>
</html>
